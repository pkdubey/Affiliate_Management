{% extends 'base.html' %}
{% block content %}
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
<style>
/* Center page content and limit max width for modern look */
.validation-export-area {
    max-width: 790px;
    margin: 0 auto 32px auto;
    padding: 0;
    animation: fadePageIn 0.85s cubic-bezier(.36,.84,.36,1);
}
@keyframes fadePageIn {
    from { opacity:0; transform: translateY(30px); }
    to { opacity:1; transform: none; }
}

/* Card styles for glassmorphism feel */
.glassy-card {
    border-radius: 1.15em;
    border: none;
    background: rgba(255,255,255,0.21);
    backdrop-filter: blur(9px) saturate(125%);
    box-shadow: 0 7px 30px #0eb2b524, 0 2px 10px #1963b318;
    margin-bottom: 1.8rem;
    animation: fadeCardUp 0.82s;
}
@keyframes fadeCardUp {
    from { opacity:0; transform: translateY(25px);}
    to { opacity:1; transform: none;}
}

/* Card headers */
.glassy-card .card-header {
    color: #1963b3;
    font-weight: 700;
    font-size: 1.23rem;
    letter-spacing: 0.04em;
    background: linear-gradient(90deg, #eafdff 70%,#ecf4fd 100%);
    border-radius: 1em 1em 0 0;
    border: none;
}

/* Animated and modern buttons */
.btn-glassy-success {
    color: #fff;
    background: linear-gradient(90deg,#1dbfae 60%,#1963b3 100%);
    border: none;
    box-shadow: 0 3px 12px #1dbfae22;
    transition: background 0.19s, transform .14s;
    font-weight: 600;
}
.btn-glassy-success:hover {
    background: linear-gradient(100deg,#1963b3 20%,#1dbfae 90%);
    transform: translateY(-2px) scale(1.04);
}

.btn-glassy-primary {
    background: linear-gradient(91deg,#329bec 55%,#1dbfae 100%);
    color: #fff;
    border: none;
}
.btn-glassy-primary:hover {
    background: linear-gradient(100deg,#1dbfae 20%,#329bec 90%);
    color:#fff;
    transform: translateY(-2px) scale(1.04);
}
.btn-glassy-info {
    background: linear-gradient(91deg,#62b6ff 40%,#1dbfae 100%);
    color: #fff;
    border: none;
}
.btn-glassy-info:hover {
    background: linear-gradient(100deg,#1dbfae 20%,#62b6ff 90%);
    color:#fff;
    transform: translateY(-2px) scale(1.04);
}

/* Animate icon on button hover */
.btn i { transition: transform .13s;}
.btn:hover i { transform: scale(1.15) rotate(-7deg); }

.form-label { font-weight: 600; color: #1963b3; }
.form-control:focus, .form-select:focus {
    box-shadow: 0 0 0 2px #1dbfae33;
    border-color: #1dbfae;
}

/* Alert styles */
.alert { border-radius: .9em; font-weight: 500;}

/* Small subtle divider for modern look */
.divider {
    margin: 2.2rem 0 1.2rem 0;
    border: none;
    border-top: 2px solid #e4f6f8;
}
</style>

<div class="validation-export-area">

  <!-- Export CSV Card -->
  <div class="card glassy-card animate__animated animate__fadeInDown">
    <div class="card-header">
      <i class="bi bi-file-earmark-arrow-down me-2"></i> Export Validation Table
    </div>
    <div class="card-body d-flex flex-column align-items-start">
      <form method="get" action="" class="w-100">
        <button type="submit" name="export" value="csv" class="btn btn-glassy-success px-4 py-2">
          <i class="bi bi-download me-1"></i> Download as Excel (CSV)
        </button>
      </form>
    </div>
  </div>

  <!-- Update Validation Status Card -->
  <div class="card glassy-card animate__animated animate__fadeInDown animate__delay-1s">
    <div class="card-header">
      <i class="bi bi-pencil-square me-2"></i> Update Validation Status
    </div>
    <div class="card-body">
      <form method="post" action="">
        {% csrf_token %}
        <div class="mb-3">
          <label for="validation_id" class="form-label">Validation ID</label>
          <input type="number" class="form-control" id="validation_id" name="validation_id" required placeholder="Enter Validation ID">
        </div>
        <div class="mb-3">
          <label for="status" class="form-label">Status</label>
          <select class="form-select" id="status" name="status" required>
            <option value="Pending">Pending</option>
            <option value="Approved">Approved</option>
            <option value="Rejected">Rejected</option>
          </select>
        </div>
        <button type="submit" class="btn btn-glassy-primary px-4">
          <i class="bi bi-check2-circle me-1"></i> Update Status
        </button>
      </form>
    </div>
  </div>

  <!-- Email Validation Summary Card -->
  <div class="card glassy-card animate__animated animate__fadeInDown animate__delay-2s">
    <div class="card-header">
      <i class="bi bi-envelope-paper me-2"></i> Email Validation Summary
    </div>
    <div class="card-body">
      <form method="post" action="">
        {% csrf_token %}
        <div class="mb-3">
          <label for="email" class="form-label">Affiliate Email</label>
          <input type="email" class="form-control" id="email" name="email" required placeholder="Enter affiliate email">
        </div>
        <button type="submit" name="send_email" value="1" class="btn btn-glassy-info px-4">
          <i class="bi bi-send me-1"></i> Send Summary
        </button>
      </form>
    </div>
    <div class="p-3 pt-1">
      {% if messages %}
        {% for message in messages %}
          <div class="alert alert-{{ message.tags }} mb-1">{{ message }}</div>
        {% endfor %}
      {% endif %}
    </div>
  </div>

</div>

<!-- Animate.css (optional, for extra bounce/fade classes) -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css">
{% endblock %}
